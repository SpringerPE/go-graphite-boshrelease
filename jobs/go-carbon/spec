---
name: go-carbon

packages:
- go-carbon
- carbonserver

templates:
  bin/go-carbon_ctl: bin/go-carbon_ctl
  bin/carbonserver_ctl: bin/carbonserver_ctl
  config/go-carbon.conf.erb: config/go-carbon.conf
  config/storage-schema.conf.erb: config/storage-schemas.conf
  bin/monit_debugger: bin/monit_debugger
  data/properties.sh.erb: data/properties.sh
  helpers/ctl_setup.sh: helpers/ctl_setup.sh
  helpers/ctl_utils.sh: helpers/ctl_utils.sh


properties:
  go-carbon.metric_interval:
    description: 
    default: "1m0s"
  go-carbon.max_cpu:
    description: Number of CPUs to use (GOMAXPROCS)
    default: 0
  go-carbon.whisper_workers:
    description:
    default: 16
  go-carbon.cache_max_size:
    description:
    default: 20000000
  go-carbon.cache_input_buffer:
    description:
    default: 20000000
  go-carbon.tcp_listen:
    description:
    default: 2003
  go-carbon.udp:
    description: UDP hash with host and/or port keys 
    default: {}
  go-carbon.pickle:
    description: Pickle hash with host and/or port keys 
    default: {}
  go-carbon.carbonlink:
    description: Carbonlink hash with host and/or port keys
    default: {}              
  go-carbon.schemas:
    description: Storage schemas
    default:
      - name: "carbon"
        pattern: "^carbon\\."
        retentions: "60:90d"
      - name: "default_1min_for_1day"
        pattern: ".*"
        retentions: "60s:1d"
  carbonserver.duration:
    description: "interval to report internal statistics to graphite"
    default: "1m0s"
  carbonserver.maxprocs:
    description: "GOMAXPROCS"
    default: 3
  carbonserver.port:
    description: "port to bind to"
    default: 8080

