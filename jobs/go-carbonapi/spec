---
name: go-carbonapi

packages:
- carbonapi
- carbonzipper

templates:
  bin/carbonapi_ctl: bin/carbonapi_ctl
  bin/carbonzipper_ctl: bin/carbonzipper_ctl
  bin/monit_debugger: bin/monit_debugger
  config/carbonzipper.json.erb: config/carbonzipper.json
  data/properties.sh.erb: data/properties.sh
  helpers/ctl_setup.sh: helpers/ctl_setup.sh
  helpers/ctl_utils.sh: helpers/ctl_utils.sh

properties:
  carbonapi.graphite:
    description: "Hash defining graphite endpoint for internal metrics: host, interval"
  carbonapi.cache:
    description: "Hash defining the type of cache to use: mem or memcache"
    default:
      type: mem
      memsize: 0
  carbonapi.concurrency:
    description: "Concurrency limit (for api queries)"
    default: 20
  carbonapi.max_cpus:
    description: "Number of CPUs to use (GOMAXPROCS, 0 == unlimited)"
    default: 0
  carbonapi.timezone:
    description: "Timezone,offset to use for dates with no timezone"
    default: "UTC,0"
  carbonzipper.duration:
    description: "interval to report internal statistics to graphite"
    default: "1m0s"
  carbonzipper.maxprocs:
    description: "GOMAXPROCS"
    default: 3
  carbonzipper.port:
    description: "port to bind to"
    default: 8080
  carbonzipper.backends:
    description: List of backends host keys in a hash
    default: []
